<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Re-agendar o Cancelar una cita</title>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  /* ===== Variables de layout (coinciden con el card) ===== */
  :root{
    --container-w: 800px;     /* max-width de .container */
    --container-pad: 20px;
    --container-bl: 4px;
    --banner-h: 64px;
    --page-sidepad: 16px;
    --banner-bg: #e6e9ee;
    --banner-bg-hover: #d7dbe3;
  }

  /* ===== Base ===== */
  body {
    font-family: 'Open Sans', sans-serif;
    background-color: #eeeeee;
    margin: 0;
    padding: 20px;
    color: #333;
    padding-top: calc(var(--banner-h) + 8px); /* espacio para banner fijo */
  }

  .container {
    max-width: var(--container-w);
    margin: auto;
    padding: var(--container-pad);
    background-color: #ffffff;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
    border-radius: 10px;
    border-left: var(--container-bl) solid #5c6bc0;
  }

  h1 {
    color: #000;
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 20px;
    text-align: center;
  }

  h2 {
    color: #000;
    font-size: 20px;
    font-weight: 600;
    margin-top: 20px;
  }

  label {
    display: block;
    margin: 10px 0;
    color: #003366;
    font-size: 16px;
    font-weight: 400;
  }

  input[type="text"], select, textarea {
    width: 100%;
    padding: 12px;
    margin-bottom: 20px;
    border: 2px solid #dddddd;
    border-radius: 5px;
    box-sizing: border-box;
    transition: border-color 0.3s;
    font-size: 16px;
  }

  input[type="text"]:focus, select:focus, textarea:focus {
    outline: none;
    border-color: #7da2a9;
  }

  /* ===== Botones ===== */
  button {
    display: block;
    width: 100%;
    margin: 20px 0;
    background-color: #5c6bc0;
    color: white;
    border: none;
    padding: 15px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.3s, transform 0.3s;
    font-size: 16px;
  }
  button:hover { background-color: #3f51b5; transform: translateY(-2px); }

  /* Único botón reducido (~75% del ancho, centrado) */
  .btn-slim{
    width: min(640px, 75%);
    margin-left: auto;
    margin-right: auto;
  }

  #detalle_accion {
    background-color: #fafafa;
    border: 2px solid #e0e0e0;
    height: 100px;
    resize: none;
  }

  /* ===== Banner superior (mismo ancho que el card) ===== */
  .app-banner{
    position: fixed; top: 0; left: 0; right: 0; height: var(--banner-h);
    z-index: 9999; background: transparent;
  }
  .app-banner .banner-box{
    height: 100%;
    width: min(calc(var(--container-w) + var(--container-pad)*2 + var(--container-bl)),
               calc(100% - var(--page-sidepad)*2));
    margin: 0 auto;
    background: var(--banner-bg);
    border-bottom: 1px solid rgba(0,0,0,.06);
    border-radius: 10px;
    transition: background-color .2s ease;
    display: flex; align-items: center;
  }
  .app-banner .banner-box:hover,
  .app-banner .banner-box:focus-within{ background: var(--banner-bg-hover); }

  .app-banner .banner-inner{
    display: grid; grid-template-columns: 1fr auto 1fr; align-items: center;
    gap: 8px; width: 100%; padding: 0 12px;
  }
  .banner-back{ justify-self: start; }
  .banner-title{ justify-self: center; font-weight: 700; color: #233247; }
  .banner-logo{ justify-self: end; display: inline-flex; align-items: center; }
  .banner-logo img{ width: 52px; height: auto; display: block; }

  /* botón volver del banner */
  .back-button{
    display:inline-block; text-decoration:none; font-size:14px; color:#5c6bc0;
    padding:8px 12px; border:1px solid #5c6bc0; border-radius:6px;
    transition: background-color .2s, color .2s;
  }
  .back-button:hover{ background:#5c6bc0; color:#fff; }

  /* ===== LEGAL FUERA DE LA PÁGINA ===== */
  .legal-outside{
    margin: 18px auto 24px;
    padding: 10px 12px;
    max-width: calc(var(--container-w) + var(--container-pad)*2 + var(--container-bl));
    text-align: center; color: #666; font-size: 14px; line-height: 1.35;
  }

  @media (max-width: 768px) {
    .container { width: 100%; padding: 10px; }
    h1, .banner-title { font-size: 20px; }
    label, button { font-size: 14px; }
    .btn-slim{ width: 100%; }
  }
</style>
</head>
<body>

  <!-- ===== BANNER SUPERIOR ===== -->
  <header class="app-banner" role="banner">
    <div class="banner-box">
      <div class="banner-inner">
        <a href="#" class="back-button banner-back" onclick="history.back(); return false;">&larr; Volver</a>
        <div class="banner-title">Re-agendar o Cancelar una cita</div>
        <a href="interfaz_inicio_s.html" class="banner-logo" aria-label="Ir al inicio">
          <img src="LogoCitasYa.png" alt="Citas Ya">
        </a>
      </div>
    </div>
  </header>

  <div class="container">
    <h1>Re-agendar o Cancelar una cita</h1>

    <!-- Selección de acción -->
    <label for="accion">Seleccione la acción:</label>
    <select id="accion">
      <option value="cancelar">Cancelar cita</option>
      <option value="reagenda">Re-agendar cita</option>
    </select>

    <!-- Sección de cancelación -->
    <div id="seccion_cancelar">
      <h2>Datos de la cita a cancelar</h2>
      <label for="nombre_cliente_cancelar">Ingrese su nombre completo</label>
      <input type="text" id="nombre_cliente_cancelar" placeholder="Ej: Juan Martín Betancur Uribe">

      <label for="tipo_cita_cancelar">Ingrese tipo de cita</label>
      <select id="tipo_cita_cancelar">
        <option>Seleccione</option>
        <option>Barbería</option>
        <option>Manicure</option>
      </select>

      <label for="nombre_servicio_cancelar">Nombre de la <span id="tipo_servicio_label_cancelar"></span></label>
      <input type="text" id="nombre_servicio_cancelar" placeholder="Ej: Barbería 1">

      <label for="dia_cita_cancelar">Seleccione el día de la cita</label>
      <select id="dia_cita_cancelar">
        <option>Seleccione</option>
        <option>Lunes</option>
        <option>Martes</option>
        <option>Miercoles</option>
        <option>Jueves</option>
        <option>Viernes</option>
        <option>Sabado</option>
      </select>

      <label for="hora_cita_cancelar">Seleccione la hora de la cita</label>
      <select id="hora_cita_cancelar">
        <option>Seleccione</option>
        <option>8:00 AM</option>
        <option>8:30 AM</option>
        <option>9:00 AM</option>
        <option>9:30 AM</option>
        <option>10:00 AM</option>
        <option>10:30 AM</option>
        <option>11:00 AM</option>
        <option>11:30 AM</option>
        <option>2:00 PM</option>
        <option>2:30 PM</option>
        <option>3:00 PM</option>
        <option>3:30 PM</option>
        <option>4:00 PM</option>
        <option>4:30 PM</option>
        <option>5:00 PM</option>
        <option>5:30 PM</option>
        <option>6:00 PM</option>
        <option>6:30 PM</option>
      </select>
    </div>

    <!-- Sección de re-agendado -->
    <div id="seccion_reagenda" style="display:none;">
      <h2>Datos para re-agendar la cita</h2>
      <label for="barrio_cita_reagenda">Seleccione el barrio de la nueva cita</label>
      <select id="barrio_cita_reagenda">
        <option>Seleccione</option>
        <option>Cable</option>
        <option>Enea</option>
        <option>Milan</option>
        <option>Palermo</option>
        <option>Estrella</option>
      </select>

      <label for="nombre_servicio_reagenda">Nombre del servicio <span id="tipo_servicio_label_reagenda"></span></label>
      <select id="nombre_servicio_reagenda">
        <option>Seleccione</option>
      </select>

      <label for="dia_cita_reagenda">Seleccione el día de la nueva cita</label>
      <select id="dia_cita_reagenda">
        <option>Seleccione</option>
        <option>Lunes</option>
        <option>Martes</option>
        <option>Miercoles</option>
        <option>Jueves</option>
        <option>Viernes</option>
        <option>Sabado</option>
      </select>

      <label for="hora_cita_reagenda">Seleccione la hora de la nueva cita</label>
      <select id="hora_cita_reagenda">
        <option>Seleccione</option>
        <option>8:00 AM</option>
        <option>8:30 AM</option>
        <option>9:00 AM</option>
        <option>9:30 AM</option>
        <option>10:00 AM</option>
        <option>10:30 AM</option>
        <option>11:00 AM</option>
        <option>11:30 AM</option>
        <option>2:00 PM</option>
        <option>2:30 PM</option>
        <option>3:00 PM</option>
        <option>3:30 PM</option>
        <option>4:00 PM</option>
        <option>4:30 PM</option>
        <option>5:00 PM</option>
        <option>5:30 PM</option>
        <option>6:00 PM</option>
        <option>6:30 PM</option>
      </select>
    </div>

    <!-- Botón de acción reducido -->
    <button id="boton_accion" class="btn-slim">Cancelar cita</button>

    <h2 id="respuesta_accion"></h2>
    <textarea id="detalle_accion" rows="4"></textarea>
  </div>

  <!-- ===== LEGAL FUERA DE LA PÁGINA ===== -->
  <div class="legal-outside">
    Todos los derechos reservados © 2025<br>
    Citas Ya S.A.S - Nit 810.000.000-0
  </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var accionSelect = document.getElementById('accion');
  var seccionReagenda = document.getElementById('seccion_reagenda');
  var botonAccion = document.getElementById('boton_accion');
  var respuestaAccion = document.getElementById('respuesta_accion');
  var detalleAccion = document.getElementById('detalle_accion');

  // Campos de la sección de cancelación
  var nombreCompleto = document.getElementById('nombre_cliente_cancelar');
  var tipoCitaCancelacion = document.getElementById('tipo_cita_cancelar');
  var servicioLabelCancelacion = document.getElementById('tipo_servicio_label_cancelar');
  var nombreServicioCancelacion = document.getElementById('nombre_servicio_cancelar');
  var diaCitaCancelar = document.getElementById('dia_cita_cancelar');
  var horaCitaCancelar = document.getElementById('hora_cita_cancelar');

  // Campos de la sección de re-agendado
  var barrioCitaReagenda = document.getElementById('barrio_cita_reagenda');
  var nombreServicioReagenda = document.getElementById('nombre_servicio_reagenda');
  var tipoServicioLabelReagenda = document.getElementById('tipo_servicio_label_reagenda');
  var diaCitaReagenda = document.getElementById('dia_cita_reagenda');
  var horaCitaReagenda = document.getElementById('hora_cita_reagenda');

  // Actualizar etiqueta de servicio en la sección de cancelación y re-agenda según el tipo seleccionado
  tipoCitaCancelacion.addEventListener('change', function() {
    var tipo = tipoCitaCancelacion.value;
    servicioLabelCancelacion.textContent = (tipo === 'Seleccione') ? '' : tipo;
    tipoServicioLabelReagenda.textContent = (tipo === 'Seleccione') ? '' : tipo;
    actualizarServiciosReagenda(barrioCitaReagenda.value, tipo);
  });

  // Actualizar opciones dinámicas de servicios en re-agenda cuando cambia el barrio
  barrioCitaReagenda.addEventListener('change', function() {
    actualizarServiciosReagenda(barrioCitaReagenda.value, tipoCitaCancelacion.value);
  });

  // Función para actualizar las opciones de servicio en re-agenda
  function actualizarServiciosReagenda(barrio, tipo) {
    var serviciosPorBarrio = {
      'Cable': {'Barbería': ['Cable 1', 'Cable 2'], 'Manicure': ['Cable A', 'Cable B']},
      'Enea': {'Barbería': ['Enea 1', 'Enea 2'], 'Manicure': ['Enea A', 'Enea B']},
      'Milan': {'Barbería': ['Milan 1', 'Milan 2'], 'Manicure': ['Milan A', 'Milan B']},
      'Palermo': {'Barbería': ['Palermo 1', 'Palermo 2'], 'Manicure': ['Palermo A', 'Palermo B']},
      'Estrella': {'Barbería': ['Estrella 1', 'Estrella 2'], 'Manicure': ['Estrella A', 'Estrella B']}
    };
    nombreServicioReagenda.innerHTML = '';
    var defaultOption = document.createElement('option');
    defaultOption.value = 'Seleccione';
    defaultOption.textContent = 'Seleccione';
    nombreServicioReagenda.appendChild(defaultOption);
    if (barrio !== 'Seleccione' && tipo !== 'Seleccione' && serviciosPorBarrio[barrio]) {
      var servicios = serviciosPorBarrio[barrio][tipo];
      servicios.forEach(function(servicio) {
        var option = document.createElement('option');
        option.value = servicio;
        option.textContent = servicio;
        nombreServicioReagenda.appendChild(option);
      });
    }
  }

  // Mostrar u ocultar la sección de re-agendado según la opción seleccionada
  accionSelect.addEventListener('change', function() {
    if (accionSelect.value === 'reagenda') {
      seccionReagenda.style.display = 'block';
      botonAccion.textContent = 'Re-agendar cita';
    } else {
      seccionReagenda.style.display = 'none';
      botonAccion.textContent = 'Cancelar cita';
    }
  });

  // Evento para el botón de acción
  botonAccion.addEventListener('click', function(e) {
    e.preventDefault();
    var accion = accionSelect.value;
    // Datos de la cita a cancelar
    var nombre = nombreCompleto.value;
    var tipo = tipoCitaCancelacion.options[tipoCitaCancelacion.selectedIndex].text;
    var servicio = nombreServicioCancelacion.value;
    var dia = diaCitaCancelar.options[diaCitaCancelar.selectedIndex].text;
    var hora = horaCitaCancelar.options[horaCitaCancelar.selectedIndex].text;
    var mensaje = "";
    if (accion === 'cancelar') {
      mensaje = nombre + ", su cita de " + tipo + " en " + servicio + " para el día " + dia + " a las " + hora + " ha sido cancelada.";
      respuestaAccion.textContent = "Cita Cancelada";
    } else if (accion === 'reagenda') {
      // Datos de la nueva cita
      var barrioReagenda = barrioCitaReagenda.options[barrioCitaReagenda.selectedIndex].text;
      var servicioReagenda = nombreServicioReagenda.options[nombreServicioReagenda.selectedIndex].text;
      var diaReagenda = diaCitaReagenda.options[diaCitaReagenda.selectedIndex].text;
      var horaReagenda = horaCitaReagenda.options[horaCitaReagenda.selectedIndex].text;
      mensaje = nombre + ", su cita de " + tipo + " en " + servicio + " para el día " + dia + " a las " + hora + " ha sido cancelada.\n";
      mensaje += "Se ha re-agendado una nueva cita en " + barrioReagenda + ", servicio " + servicioReagenda + " para el día " + diaReagenda + " a las " + horaReagenda + ".";
      respuestaAccion.textContent = "Cita Re-agendada";
    }
    detalleAccion.value = mensaje;
  });
});
</script>

</body>
</html>
